<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Geometry computations: Example 7 &mdash; SimBA 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/simba_theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
    <link rel="shortcut icon" href="../_static/readthedocs_logo.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Import SLEAP H5 files" href="import_sleap_h5.html" />
    <link rel="prev" title="Geometry computations: Example 6" href="geometry_example_6.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SimBA
              <img src="../_static/readthedocs_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">API REFERENCE:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NOTEBOOKS:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../notebooks.html">Notebooks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../notebooks.html#general-processing">General processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks.html#visualizations">Visualizations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../notebooks.html#geometry-and-image-related-calculators">Geometry- and image-related calculators</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="geometry_example_1.html">Geometry computations: Example 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="geometry_example_2.html">Geometry computations: Example 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="geometry_ex_3.html">Geometry computations: Example 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="geometry_example_3.html">Geometry computations: Example 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="geometry_example_5.html">Geometry computations: Example 5</a></li>
<li class="toctree-l3"><a class="reference internal" href="geometry_example_6.html">Geometry computations: Example 6</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Geometry computations: Example 7</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">USER GUIDE / TUTORIALS:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">WALKTHROUGHS:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../walkthroughs.html">Walkthroughs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">LABELLING TUTORIALS:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../labelling.html">Labelling</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials_rst/FAQ.html">Friendly Asked Questions (FAQ)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DOCS:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../docs/workflow.html">SimBA basic workflow</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ABOUT:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html#who-writes-this-stuff">Who writes this stuff??</a></li>
<li class="toctree-l1"><a class="reference internal" href="../links.html">Links</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SimBA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../notebooks.html">Notebooks</a></li>
      <li class="breadcrumb-item active">Geometry computations: Example 7</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/nb/geometry_example_7.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Geometry-computations:-Example-7">
<h1>Geometry computations: Example 7<a class="headerlink" href="#Geometry-computations:-Example-7" title="Permalink to this heading"></a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">simba.mixins.config_reader</span> <span class="kn">import</span> <span class="n">ConfigReader</span>
<span class="kn">from</span> <span class="nn">simba.mixins.geometry_mixin</span> <span class="kn">import</span> <span class="n">GeometryMixin</span>
<span class="kn">from</span> <span class="nn">simba.mixins.image_mixin</span> <span class="kn">import</span> <span class="n">ImageMixin</span>
<span class="kn">from</span> <span class="nn">simba.utils.read_write</span> <span class="kn">import</span> <span class="n">read_df</span>
<span class="kn">from</span> <span class="nn">simba.plotting.geometry_plotter</span> <span class="kn">import</span> <span class="n">GeometryPlotter</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="kn">import</span> <span class="n">Video</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># FIRST WE DEFINE THE PATH TO OUR SIMBA PROJECT AND THE NAME OF A VIDEO IN THE SIMBA PROJECT WE WANT TO WORK WITH</span>
<span class="n">CONFIG_PATH</span> <span class="o">=</span> <span class="s1">&#39;/Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/project_config.ini&#39;</span>
<span class="n">VIDEO_NAME</span> <span class="o">=</span> <span class="s1">&#39;2022-06-20_NOB_DOT_4&#39;</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># WE READ IN THE SIMBA PROJECT CONFIG, AND GET THE ANIMAL BODY-PART DATA FOR THE VIDEO WE DEFINED ABOVE.</span>
<span class="c1"># NOTE: WE DROP THE TAIL END BODY-PART AS WE DON&#39;T WANT THAT BODY-PART TO BE DEFINING THE BOUNDARIES OF OUR ANIMAL</span>

<span class="n">cfg</span> <span class="o">=</span> <span class="n">ConfigReader</span><span class="p">(</span><span class="n">config_path</span><span class="o">=</span><span class="n">CONFIG_PATH</span><span class="p">,</span> <span class="n">read_video_info</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">read_df</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">outlier_corrected_dir</span><span class="p">,</span> <span class="n">VIDEO_NAME</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;.</span><span class="si">{</span><span class="n">cfg</span><span class="o">.</span><span class="n">file_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">file_type</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">file_type</span><span class="p">)</span>
<span class="n">video_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">video_dir</span><span class="p">,</span> <span class="n">VIDEO_NAME</span> <span class="o">+</span> <span class="s1">&#39;.mp4&#39;</span><span class="p">)</span>
<span class="n">animal_df</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">animal_bp_dict</span><span class="p">[</span><span class="s1">&#39;Animal_1&#39;</span><span class="p">][</span><span class="s1">&#39;X_bps&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">cfg</span><span class="o">.</span><span class="n">animal_bp_dict</span><span class="p">[</span><span class="s1">&#39;Animal_1&#39;</span><span class="p">][</span><span class="s1">&#39;Y_bps&#39;</span><span class="p">]]]</span>
<span class="n">animal_data</span> <span class="o">=</span> <span class="n">animal_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Tail_end_x&#39;</span><span class="p">,</span> <span class="s1">&#39;Tail_end_y&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># WE CREATE POLYGON GEOMETRIES BASED ON THE ANIMAL BODY-PARTS, AND VISUALIZE THE GEOMETRIES.</span>
<span class="c1"># NOTE: WE USE ONLY THE FIRST 300 POLYGONS TO VISUALIZE THE FIRST 300 FRAMES AS ITS QUICKER.</span>
<span class="c1"># NOTE THATE WE GET A WARNING ABOUT THIS, WHICH WE IGNORE.</span>

<span class="n">animal_polygons</span> <span class="o">=</span> <span class="n">GeometryMixin</span><span class="o">.</span><span class="n">bodyparts_to_polygon</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">animal_data</span><span class="p">)[:</span><span class="mi">300</span><span class="p">]</span>
<span class="n">GeometryPlotter</span><span class="p">(</span><span class="n">config_path</span><span class="o">=</span><span class="n">CONFIG_PATH</span><span class="p">,</span>
                <span class="n">geometries</span><span class="o">=</span><span class="p">[</span><span class="n">animal_polygons</span><span class="p">],</span>
                <span class="n">video_name</span><span class="o">=</span><span class="n">VIDEO_NAME</span><span class="p">,</span>
                <span class="n">thickness</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                <span class="n">bg_opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIMBA WARNING: FrameRangeWarning: Geometry 1 contains 300 shapes but video has 9000 frames      warning
POLYGON ((600.8811978618355 484.0070820517447, 213.0065899891334 570.1146147909743, 774.0852193056179 531.996362218247, 810.9997520408987 512.0222678404626, 768.9432086007599 498.0016139339052, 600.8811978618355 484.0070820517447)) POLYGON ((612.9196351173459 482.0032344881388, 556.0082749584689 497.8716199314532, 604.2673322255175 525.963604421534, 780.0112844957753 534.850194620572, 818.9828321047227 528.8154978213504, 786.149805379428 501.0112844957752, 612.9196351173459 482.0032344881388))
Section 0/8 complete...
Section 1/8 complete...
Section 2/8 complete...
Section 3/8 complete...
Section 4/8 complete...
Section 5/8 complete...
Section 6/8 complete...
Section 7/8 complete...
Joining 2022-06-20_NOB_DOT_4 geometry video...
SIMBA COMPLETE: Video concatenated (elapsed time: 7.1826s)      complete
SIMBA COMPLETE: Geometry video /Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/2022-06-20_NOB_DOT_4.mp4 complete! (elapsed time: 36.2837s)  complete
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS IS HOW THE POLYGONS LOOK LIKE: NOTE THAT THE BLACK PORTIONS ARE NOT PART OF THE POLYGONS, IT&#39;S JUST VISUALIZATION</span>
<span class="c1"># PADDING TO MAKE SURE THAT THE VIDEO HAS UNIFORM SIZE ACROSS ITS ENTIRE LENGTH EVEN THOUGH THE ANIMAL SHIFT ITS SHAPE.</span>

<span class="n">video_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_1_clipped.webm&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39; &lt;video width=&quot;800&quot; height=&quot;800&quot; controls&gt; &lt;source src=&quot;</span><span class="si">{</span><span class="n">video_url</span><span class="si">}</span><span class="s1">&quot; type=&quot;video/mp4&quot;&gt; &lt;/video&gt;</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<video width="800" height="800" controls> <source src="https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_1_clipped.webm" type="video/mp4"> </video></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE THAT YOU CAN CONTROL THE THICKNESS OF THE BOUNDARY POLYGON AND THE OPACITY OF THE VIDEO BACKGROUND.</span>
<span class="c1"># HERE WE MAKE THE LINES A LITTLE THICKER AND THE THE OPACITY A LITTLE LIGHTER</span>
<span class="n">animal_polygons</span> <span class="o">=</span> <span class="n">GeometryMixin</span><span class="o">.</span><span class="n">bodyparts_to_polygon</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">animal_data</span><span class="p">)[:</span><span class="mi">300</span><span class="p">]</span>
<span class="n">GeometryPlotter</span><span class="p">(</span><span class="n">config_path</span><span class="o">=</span><span class="n">CONFIG_PATH</span><span class="p">,</span>
                <span class="n">geometries</span><span class="o">=</span><span class="p">[</span><span class="n">animal_polygons</span><span class="p">],</span>
                <span class="n">video_name</span><span class="o">=</span><span class="n">VIDEO_NAME</span><span class="p">,</span>
                <span class="n">thickness</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
                <span class="n">bg_opacity</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIMBA WARNING: FrameRangeWarning: Geometry 1 contains 300 shapes but video has 9000 frames      warning
POLYGON ((600.8811978618355 484.0070820517447, 213.0065899891334 570.1146147909743, 774.0852193056179 531.996362218247, 810.9997520408987 512.0222678404626, 768.9432086007599 498.0016139339052, 600.8811978618355 484.0070820517447)) POLYGON ((612.9196351173459 482.0032344881388, 556.0082749584689 497.8716199314532, 604.2673322255175 525.963604421534, 780.0112844957753 534.850194620572, 818.9828321047227 528.8154978213504, 786.149805379428 501.0112844957752, 612.9196351173459 482.0032344881388))
Section 0/8 complete...
Section 1/8 complete...
Section 2/8 complete...
Section 3/8 complete...
Section 4/8 complete...
Section 5/8 complete...
Section 6/8 complete...
Section 7/8 complete...
Joining 2022-06-20_NOB_DOT_4 geometry video...
SIMBA COMPLETE: Video concatenated (elapsed time: 4.3408s)      complete
SIMBA COMPLETE: Geometry video /Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/2022-06-20_NOB_DOT_4.mp4 complete! (elapsed time: 48.8753s)  complete
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS IS HOW THE SHAPES LOOK LIKE: NOTE THAT THE BLACK PORTIONS ARE NOT PART OF THE POLYGONS, IT&#39;S JUST VISUALIZATION</span>
<span class="c1"># PADDING TO MAKE SURE THAT THE VIDEO HAS UNIFORM SIZE ACROSS ITS ENTIRE LENGTH EVEN THOUGH THE ANIMAL SHIFT ITS SHAPE.</span>

<span class="n">video_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_2_clipped.webm&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39; &lt;video width=&quot;800&quot; height=&quot;800&quot; controls&gt; &lt;source src=&quot;</span><span class="si">{</span><span class="n">video_url</span><span class="si">}</span><span class="s1">&quot; type=&quot;video/mp4&quot;&gt; &lt;/video&gt;</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<video width="800" height="800" controls> <source src="https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_2_clipped.webm" type="video/mp4"> </video></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># WE CAN FORCE THE POLYGONS INTO RECTANGLES, IF YOU NEED OR WANT TO WORK WITH RECTANGLES INSTEAD OF MORE COMPLEX</span>
<span class="c1"># POLYGONS, WHICH ALSO CAN SAVE SOME MEMORY AND RUNTIME</span>
<span class="n">animal_rectangles</span> <span class="o">=</span> <span class="n">GeometryMixin</span><span class="p">()</span><span class="o">.</span><span class="n">multiframe_minimum_rotated_rectangle</span><span class="p">(</span><span class="n">shapes</span><span class="o">=</span><span class="n">animal_polygons</span><span class="p">)</span>
<span class="n">GeometryPlotter</span><span class="p">(</span><span class="n">config_path</span><span class="o">=</span><span class="n">CONFIG_PATH</span><span class="p">,</span>
                <span class="n">geometries</span><span class="o">=</span><span class="p">[</span><span class="n">animal_rectangles</span><span class="p">],</span>
                <span class="n">video_name</span><span class="o">=</span><span class="n">VIDEO_NAME</span><span class="p">,</span>
                <span class="n">thickness</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
                <span class="n">bg_opacity</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
                <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIMBA COMPLETE: Rotated rectangles complete. (elapsed time: 0.173s)     complete
SIMBA WARNING: FrameRangeWarning: Geometry 1 contains 300 shapes but video has 9000 frames      warning
POLYGON ((208.9655492604527 510.6328327041817, 808.1398698302264 469.9264559270188, 812.1809105589073 529.4082380138116, 213.0065899891335 570.1146147909744, 208.9655492604527 510.6328327041817)) POLYGON ((556.9537663907289 479.1732893658065, 820.8183490416543 492.5157480038884, 818.5790713044573 536.8003961030421, 554.7144886535319 523.4579374649602, 556.9537663907289 479.1732893658065))
Section 0/8 complete...
Section 1/8 complete...
Section 2/8 complete...
Section 3/8 complete...
Section 4/8 complete...
Section 5/8 complete...
Section 6/8 complete...
Section 7/8 complete...
Joining 2022-06-20_NOB_DOT_4 geometry video...
SIMBA COMPLETE: Video concatenated (elapsed time: 3.6825s)      complete
SIMBA COMPLETE: Geometry video /Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/2022-06-20_NOB_DOT_4.mp4 complete! (elapsed time: 40.9096s)  complete
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS IS HOW THE SHAPES LOOK LIKE: NOTE THAT THE BLACK PORTIONS ARE NOT PART OF THE POLYGONS, IT&#39;S JUST VISUALIZATION</span>
<span class="c1"># PADDING TO MAKE SURE THAT THE VIDEO HAS UNIFORM SIZE ACROSS ITS ENTIRE LENGTH EVEN THOUGH THE ANIMAL SHIFT ITS SHAPE.</span>

<span class="n">video_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_3_clipped.webm&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39; &lt;video width=&quot;800&quot; height=&quot;800&quot; controls&gt; &lt;source src=&quot;</span><span class="si">{</span><span class="n">video_url</span><span class="si">}</span><span class="s1">&quot; type=&quot;video/mp4&quot;&gt; &lt;/video&gt;</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<video width="800" height="800" controls> <source src="https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_3_clipped.webm" type="video/mp4"> </video></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># WE CAN BUFFER THE POLYGONS, TO GIVE THEM A LITTLE EXTRA SPACE AROUND THE ANIMALS BODY, IN CASE IT IS A LITTLE TIGHT AND</span>
<span class="c1"># YOUR POSE ESTIMATION KEY-POINTS DEMANDS IT HERE WE INCREASE THE POLYGON AREA WITH 10CM2</span>

<span class="n">animal_polygons_buffered</span> <span class="o">=</span> <span class="n">GeometryMixin</span><span class="o">.</span><span class="n">bodyparts_to_polygon</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">animal_data</span><span class="p">[:</span><span class="mi">300</span><span class="p">],</span> <span class="n">parallel_offset</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">pixels_per_mm</span><span class="o">=</span><span class="mf">1.88</span><span class="p">)</span>
<span class="n">GeometryPlotter</span><span class="p">(</span><span class="n">config_path</span><span class="o">=</span><span class="n">CONFIG_PATH</span><span class="p">,</span>
                <span class="n">geometries</span><span class="o">=</span><span class="p">[</span><span class="n">animal_polygons_buffered</span><span class="p">],</span>
                <span class="n">video_name</span><span class="o">=</span><span class="n">VIDEO_NAME</span><span class="p">,</span>
                <span class="n">thickness</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                <span class="n">bg_opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIMBA WARNING: FrameRangeWarning: Geometry 1 contains 300 shapes but video has 9000 frames      warning
POLYGON ((594.703486677281 432.3753487424684, 197.6216030121255 519.594165892155, 179.6128640038734 529.6698019099348, 169.4044338722866 541.3602464789109, 163.0201813334584 555.5066191409135, 161.349269424072 576.0745839216397, 167.6599968766594 595.7216661693751, 180.9956827470572 611.4694470986424, 199.3346906002576 620.9306263481005, 219.8969004770597 622.6709271302836, 783.7698796519472 583.0917407233284, 798.7382068365805 577.8723919008894, 847.1040745341971 549.8455763988441, 860.4387565294739 528.2767269363485, 862.2271289021849 502.9818512634484, 854.9748625263438 483.9596408593528, 841.0870049935058 469.0745050053731, 822.6125707854953 460.5225966255011, 781.4799204047559 447.4902767752441, 594.703486677281 432.3753487424684)) POLYGON ((613.9514212617331 430.0085403335337, 593.5548388699198 433.6959868912761, 548.2533825613939 445.7267115690751, 524.6447145002709 456.0222022941767, 508.67698884606 476.2310635763666, 504.1211033117242 501.5808218373239, 509.5165908393181 521.5441256894213, 522.1409969734499 537.9230498333352, 587.156013063716 575.2521651681825, 602.6010540190955 577.9815340485958, 784.2687538483182 587.8991044184975, 841.5262831461133 576.492252013659, 858.12542217635 563.6258645403936, 868.423979378261 545.3224478452438, 870.8048527041934 524.4560445767552, 862.2023904419826 499.7570747151636, 851.6201027484558 488.0281963884518, 817.7042720345238 459.5283725910943, 804.0102340699966 452.1539222330991, 788.7651668405925 449.0721826225218, 613.9514212617331 430.0085403335337))
Section 0/8 complete...
Section 1/8 complete...
Section 2/8 complete...
Section 3/8 complete...
Section 4/8 complete...
Section 5/8 complete...
Section 6/8 complete...
Section 7/8 complete...
Joining 2022-06-20_NOB_DOT_4 geometry video...
SIMBA COMPLETE: Video concatenated (elapsed time: 5.4889s)      complete
SIMBA COMPLETE: Geometry video /Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/2022-06-20_NOB_DOT_4.mp4 complete! (elapsed time: 45.8568s)  complete
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS IS HOW THE SHAPES LOOK LIKE: NOTE THAT THE BLACK PORTIONS ARE NOT PART OF THE POLYGONS, IT&#39;S JUST VISUALIZATION</span>
<span class="c1"># PADDING TO MAKE SURE THAT THE VIDEO HAS UNIFORM SIZE ACROSS ITS ENTIRE LENGTH EVEN THOUGH THE ANIMAL SHIFT ITS SHAPE.</span>

<span class="n">video_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_4_clipped.webm&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39; &lt;video width=&quot;800&quot; height=&quot;800&quot; controls&gt; &lt;source src=&quot;</span><span class="si">{</span><span class="n">video_url</span><span class="si">}</span><span class="s1">&quot; type=&quot;video/mp4&quot;&gt; &lt;/video&gt;</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<video width="800" height="800" controls> <source src="https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_4_clipped.webm" type="video/mp4"> </video></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># WE CAN CROP OUT THE SHAPES FROM THE REST OF THE VIDEOS, TO PERFORM DOWNSTREAM ANALYSIS OF WHATS HAPPENING INSIDE OF THE</span>
<span class="c1"># SHAPES DOWNSTREAM.</span>

<span class="c1"># HERE WE READ IN THE FIRST 300 FRAMES OF THE VIDE, AND THE CROP OUT THE BUFFERED POLYGONS FROM EACH OF THE 300 FRAMES, AND SAVE IT AS A VIDEO</span>
<span class="c1"># SO WE CAN SEE WHAT WE ARE WORKING WITH AS AN EXAMPLE.</span>


<span class="n">imgs</span> <span class="o">=</span> <span class="n">ImageMixin</span><span class="p">()</span><span class="o">.</span><span class="n">read_img_batch_from_video</span><span class="p">(</span><span class="n">video_path</span><span class="o">=</span><span class="n">video_path</span><span class="p">,</span> <span class="n">start_frm</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end_frm</span><span class="o">=</span><span class="mi">299</span><span class="p">)</span>
<span class="n">imgs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">imgs</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
<span class="n">animal_polygons_buffered</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">animal_polygons_buffered</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">sliced_buffered_animal_imgs</span> <span class="o">=</span> <span class="n">ImageMixin</span><span class="p">()</span><span class="o">.</span><span class="n">slice_shapes_in_imgs</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">imgs</span><span class="p">,</span> <span class="n">shapes</span><span class="o">=</span><span class="n">animal_polygons_buffered</span><span class="p">)</span>
<span class="n">ImageMixin</span><span class="o">.</span><span class="n">img_stack_to_video</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">sliced_buffered_animal_imgs</span><span class="p">,</span>
                              <span class="n">save_path</span><span class="o">=</span><span class="s1">&#39;/Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/sliced_buffered_animal.mp4&#39;</span><span class="p">,</span>
                              <span class="n">fps</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                              <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIMBA COMPLETE: Geometry image slicing complete. (elapsed time: 2.9396s)        complete
SIMBA COMPLETE: Video /Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/sliced_buffered_animal.mp4 complete (elapsed time: 0.9577s)   complete
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS IS HOW THE SHAPES LOOK LIKE: NOTE THAT THE BLACK PORTIONS ARE NOT PART OF THE POLYGONS, IT&#39;S JUST VISUALIZATION</span>
<span class="c1"># PADDING TO MAKE SURE THAT THE VIDEO HAS UNIFORM SIZE ACROSS ITS ENTIRE LENGTH EVEN THOUGH THE ANIMAL SHIFT ITS SHAPE.</span>

<span class="n">video_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_5_clipped.webm&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39; &lt;video width=&quot;600&quot; height=&quot;600&quot; controls&gt; &lt;source src=&quot;</span><span class="si">{</span><span class="n">video_url</span><span class="si">}</span><span class="s1">&quot; type=&quot;video/mp4&quot;&gt; &lt;/video&gt;</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<video width="600" height="600" controls> <source src="https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_5_clipped.webm" type="video/mp4"> </video></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... WE COULD ALSO CROP OUT THE ANIMAL SHAPES FROM THE VIDEO WITHOUT BUFFERING THE POLYGON SHAPES</span>
<span class="c1">#... ALTHOUGH IT CAN BE A LITTLE TRICKY TOO SEE WHATS GOING ON IN THIS EXAMPLE AS ITS A LISTER HOODED RAT</span>
<span class="c1"># AND ITS HEAD IS THE SAME COLOR AS THE BACKGROUND, I dIDN&#39;T MAKE THE BACKGROUND COLOR A PASSABLE ARGUMENT, IF YOU HAVE TROUBLE</span>
<span class="c1"># WITH BLACK BACKGROUND LET ME KNOW AND I MAKE IT NON-HARDCODED.</span>

<span class="n">animal_polygons_tighter</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">animal_polygons</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">sliced_images</span> <span class="o">=</span> <span class="n">ImageMixin</span><span class="p">()</span><span class="o">.</span><span class="n">slice_shapes_in_imgs</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">imgs</span><span class="p">,</span> <span class="n">shapes</span><span class="o">=</span><span class="n">animal_polygons_tighter</span><span class="p">)</span>
<span class="n">ImageMixin</span><span class="o">.</span><span class="n">img_stack_to_video</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">sliced_images</span><span class="p">,</span>
                              <span class="n">save_path</span><span class="o">=</span><span class="s1">&#39;/Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/animal_polygons_tighter.mp4&#39;</span><span class="p">,</span>
                              <span class="n">fps</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                              <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIMBA COMPLETE: Geometry image slicing complete. (elapsed time: 2.7625s)        complete
SIMBA COMPLETE: Video /Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/animal_polygons_tighter.mp4 complete (elapsed time: 0.5079s)  complete
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS IS HOW THE SHAPES LOOK LIKE: NOTE THAT THE BLACK PORTIONS ARE NOT PART OF THE POLYGONS, IT&#39;S JUST VISUALIZATION</span>
<span class="c1"># PADDING TO MAKE SURE THAT THE VIDEO HAS UNIFORM SIZE ACROSS ITS ENTIRE LENGTH EVEN THOUGH THE ANIMAL SHIFT ITS SHAPE.</span>

<span class="n">video_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_6_clipped.webm&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39; &lt;video width=&quot;800&quot; height=&quot;800&quot; controls&gt; &lt;source src=&quot;</span><span class="si">{</span><span class="n">video_url</span><span class="si">}</span><span class="s1">&quot; type=&quot;video/mp4&quot;&gt; &lt;/video&gt;</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<video width="800" height="800" controls> <source src="https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_6_clipped.webm" type="video/mp4"> </video></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># WE MIGHT JUST WANT THE HEAD OF THE ANIMAL. SO WE DRAW A POLYGON BETWEEN THE EARS AND THE NOSE, BUFFER IT WITH 100MM.</span>
<span class="c1"># WE THEN SLICE THOS EPORTION FROM THE VIDEO, AND SAVE IT AS A NEW VIDEO.</span>

<span class="n">animal_head</span> <span class="o">=</span> <span class="n">animal_df</span><span class="p">[[</span><span class="s1">&#39;Nose_x&#39;</span><span class="p">,</span> <span class="s1">&#39;Nose_y&#39;</span><span class="p">,</span> <span class="s1">&#39;Ear_left_x&#39;</span><span class="p">,</span> <span class="s1">&#39;Ear_left_y&#39;</span><span class="p">,</span> <span class="s1">&#39;Ear_right_x&#39;</span><span class="p">,</span> <span class="s1">&#39;Ear_right_y&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">)</span>
<span class="n">animal_head_polygons</span> <span class="o">=</span> <span class="n">GeometryMixin</span><span class="o">.</span><span class="n">bodyparts_to_polygon</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">animal_head</span><span class="p">,</span> <span class="n">parallel_offset</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">pixels_per_mm</span><span class="o">=</span><span class="mf">1.88</span><span class="p">)[:</span><span class="mi">300</span><span class="p">]</span>
<span class="n">animal_head_polygons</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">animal_head_polygons</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">sliced_images</span> <span class="o">=</span> <span class="n">ImageMixin</span><span class="p">()</span><span class="o">.</span><span class="n">slice_shapes_in_imgs</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">imgs</span><span class="p">,</span> <span class="n">shapes</span><span class="o">=</span><span class="n">animal_head_polygons</span><span class="p">)</span>
<span class="n">ImageMixin</span><span class="o">.</span><span class="n">img_stack_to_video</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">sliced_images</span><span class="p">,</span>
                              <span class="n">save_path</span><span class="o">=</span><span class="s1">&#39;/Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/animal_head_polygons_sliced.mp4&#39;</span><span class="p">,</span>
                              <span class="n">fps</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                              <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIMBA COMPLETE: Geometry image slicing complete. (elapsed time: 2.8164s)        complete
SIMBA COMPLETE: Video /Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/animal_head_polygons_sliced.mp4 complete (elapsed time: 0.1718s)      complete
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS IS HOW THE SHAPES LOOK LIKE: NOTE THAT THE BLACK PORTIONS ARE NOT PART OF THE POLYGONS, IT&#39;S JUST VISUALIZATION</span>
<span class="c1"># PADDING TO MAKE SURE THAT THE VIDEO HAS UNIFORM SIZE ACROSS ITS ENTIRE LENGTH EVEN THOUGH THE ANIMAL SHIFT ITS SHAPE.</span>

<span class="n">video_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_7_clipped.webm&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39; &lt;video width=&quot;800&quot; height=&quot;800&quot; controls&gt; &lt;source src=&quot;</span><span class="si">{</span><span class="n">video_url</span><span class="si">}</span><span class="s1">&quot; type=&quot;video/mp4&quot;&gt; &lt;/video&gt;</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<video width="800" height="800" controls> <source src="https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_7_clipped.webm" type="video/mp4"> </video></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... WE COULD ALSO CROP OUT THE ANIMAL HEAD FROM THE VIDEO WITHOUT BUFFERING THE POLYGON SHAPES SO MUCH.</span>

<span class="n">animal_head_polygons</span> <span class="o">=</span> <span class="n">GeometryMixin</span><span class="o">.</span><span class="n">bodyparts_to_polygon</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">animal_head</span><span class="p">,</span> <span class="n">parallel_offset</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">pixels_per_mm</span><span class="o">=</span><span class="mf">1.88</span><span class="p">)[:</span><span class="mi">300</span><span class="p">]</span>
<span class="n">animal_head_polygons_reshaped</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">animal_head_polygons</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">sliced_images</span> <span class="o">=</span> <span class="n">ImageMixin</span><span class="p">()</span><span class="o">.</span><span class="n">slice_shapes_in_imgs</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">imgs</span><span class="p">,</span> <span class="n">shapes</span><span class="o">=</span><span class="n">animal_head_polygons_reshaped</span><span class="p">)</span>
<span class="n">ImageMixin</span><span class="o">.</span><span class="n">img_stack_to_video</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">sliced_images</span><span class="p">,</span>
                              <span class="n">save_path</span><span class="o">=</span><span class="s1">&#39;/Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/animal_head_polygons_sliced_tighter.mp4&#39;</span><span class="p">,</span>
                              <span class="n">fps</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                              <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIMBA COMPLETE: Geometry image slicing complete. (elapsed time: 3.029s)         complete
SIMBA COMPLETE: Video /Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/animal_head_polygons_sliced_tighter.mp4 complete (elapsed time: 0.0607s)      complete
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS IS HOW THE SHAPES LOOK LIKE: NOTE THAT THE BLACK PORTIONS ARE NOT PART OF THE POLYGONS, IT&#39;S JUST VISUALIZATION</span>
<span class="c1"># PADDING TO MAKE SURE THAT THE VIDEO HAS UNIFORM SIZE ACROSS ITS ENTIRE LENGTH EVEN THOUGH THE ANIMAL SHIFT ITS SHAPE.</span>

<span class="n">video_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_8_clipped.webm&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39; &lt;video width=&quot;800&quot; height=&quot;800&quot; controls&gt; &lt;source src=&quot;</span><span class="si">{</span><span class="n">video_url</span><span class="si">}</span><span class="s1">&quot; type=&quot;video/mp4&quot;&gt; &lt;/video&gt;</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<video width="800" height="800" controls> <source src="https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_8_clipped.webm" type="video/mp4"> </video></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ANOTHER ALTERNATIVETO WORK WITH CIRCLES, IS TO FIND THE CENTER OF THE ANIMAL HEAD POLYGON, THEN USE THAT AS THE CENTERPOINT WHEN DRAWING A CIRCLE</span>
<span class="c1"># TO CROP OUT THE ANIMALS HEAD.</span>


<span class="n">head_centers</span> <span class="o">=</span> <span class="n">GeometryMixin</span><span class="o">.</span><span class="n">get_center</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">animal_head_polygons</span><span class="p">)</span>
<span class="n">head_circles</span> <span class="o">=</span> <span class="n">GeometryMixin</span><span class="o">.</span><span class="n">bodyparts_to_circle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">head_centers</span><span class="p">,</span> <span class="n">parallel_offset</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">pixels_per_mm</span><span class="o">=</span><span class="mf">1.88</span><span class="p">)</span>
<span class="n">head_circles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">head_circles</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">sliced_images</span> <span class="o">=</span> <span class="n">ImageMixin</span><span class="p">()</span><span class="o">.</span><span class="n">slice_shapes_in_imgs</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">imgs</span><span class="p">,</span> <span class="n">shapes</span><span class="o">=</span><span class="n">head_circles</span><span class="p">)</span>
<span class="n">ImageMixin</span><span class="o">.</span><span class="n">img_stack_to_video</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">sliced_images</span><span class="p">,</span>
                              <span class="n">save_path</span><span class="o">=</span><span class="s1">&#39;/Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/sliced_head_circles.mp4&#39;</span><span class="p">,</span>
                              <span class="n">fps</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                              <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIMBA COMPLETE: Geometry image slicing complete. (elapsed time: 2.3375s)        complete
SIMBA COMPLETE: Video /Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/sliced_head_circles.mp4 complete (elapsed time: 0.1322s)      complete
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS IS HOW THE SHAPES LOOK LIKE: NOTE THAT THE BLACK PORTIONS ARE NOT PART OF THE POLYGONS, IT&#39;S JUST VISUALIZATION</span>
<span class="c1"># PADDING TO MAKE SURE THAT THE VIDEO HAS UNIFORM SIZE ACROSS ITS ENTIRE LENGTH EVEN THOUGH THE ANIMAL SHIFT ITS SHAPE.</span>

<span class="n">video_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_9_clipped.webm&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39; &lt;video width=&quot;800&quot; height=&quot;800&quot; controls&gt; &lt;source src=&quot;</span><span class="si">{</span><span class="n">video_url</span><span class="si">}</span><span class="s1">&quot; type=&quot;video/mp4&quot;&gt; &lt;/video&gt;</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<video width="800" height="800" controls> <source src="https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_9_clipped.webm" type="video/mp4"> </video></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... WE COULD ALSO CROP OUT THE ANIMAL HEAD CIRCLE  FROM THE VIDEO WITHOUT BUFFERING THE POLYGON SHAPES SO MUCH.</span>

<span class="n">head_circles</span> <span class="o">=</span> <span class="n">GeometryMixin</span><span class="o">.</span><span class="n">bodyparts_to_circle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">head_centers</span><span class="p">,</span> <span class="n">parallel_offset</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">pixels_per_mm</span><span class="o">=</span><span class="mf">1.88</span><span class="p">)</span>
<span class="n">head_circles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">head_circles</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">sliced_images</span> <span class="o">=</span> <span class="n">ImageMixin</span><span class="p">()</span><span class="o">.</span><span class="n">slice_shapes_in_imgs</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">imgs</span><span class="p">,</span> <span class="n">shapes</span><span class="o">=</span><span class="n">head_circles</span><span class="p">)</span>
<span class="n">ImageMixin</span><span class="o">.</span><span class="n">img_stack_to_video</span><span class="p">(</span><span class="n">imgs</span><span class="o">=</span><span class="n">sliced_images</span><span class="p">,</span>
                              <span class="n">save_path</span><span class="o">=</span><span class="s1">&#39;/Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/sliced_head_circles_tighter.mp4&#39;</span><span class="p">,</span>
                              <span class="n">fps</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                              <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIMBA COMPLETE: Geometry image slicing complete. (elapsed time: 2.621s)         complete
SIMBA COMPLETE: Video /Users/simon/Desktop/envs/simba/troubleshooting/RAT_NOR/project_folder/frames/output/geometry_visualization/sliced_head_circles_tighter.mp4 complete (elapsed time: 0.0371s)      complete
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS IS HOW THE SHAPES LOOK LIKE: NOTE THAT THE BLACK PORTIONS ARE NOT PART OF THE POLYGONS, IT&#39;S JUST VISUALIZATION</span>
<span class="c1"># PADDING TO MAKE SURE THAT THE VIDEO HAS UNIFORM SIZE ACROSS ITS ENTIRE LENGTH EVEN THOUGH THE ANIMAL SHIFT ITS SHAPE.</span>

<span class="n">video_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_10_clipped.webm&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39; &lt;video width=&quot;800&quot; height=&quot;800&quot; controls&gt; &lt;source src=&quot;</span><span class="si">{</span><span class="n">video_url</span><span class="si">}</span><span class="s1">&quot; type=&quot;video/mp4&quot;&gt; &lt;/video&gt;</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<video width="800" height="800" controls> <source src="https://raw.githubusercontent.com/sgoldenlab/simba/master/docs/_static/img/geometry_example_7_10_clipped.webm" type="video/mp4"> </video></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="geometry_example_6.html" class="btn btn-neutral float-left" title="Geometry computations: Example 6" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="import_sleap_h5.html" class="btn btn-neutral float-right" title="Import SLEAP H5 files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, sronilsson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
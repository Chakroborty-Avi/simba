<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>simba.mixins.annotator_mixin &mdash; SimBA 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/simba_theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />

  
    <link rel="shortcut icon" href="../../../_static/readthedocs_logo.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            SimBA
              <img src="../../../_static/readthedocs_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">API REFERENCE:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NOTEBOOKS:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../notebooks.html">Notebooks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">USER GUIDE / TUTORIALS:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials.html">Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">WALKTHROUGHS:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../walkthroughs.html">Walkthroughs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">LABELLING TUTORIALS:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../labelling.html">Labelling</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials_rst/FAQ.html">Friendly Asked Questions (FAQ)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DOCS:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/workflow.html">SimBA basic workflow</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ABOUT:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../credits.html#who-writes-this-stuff">Who writes this stuff??</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../links.html">Links</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">SimBA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">simba.mixins.annotator_mixin</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for simba.mixins.annotator_mixin</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
<span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">PIPE</span><span class="p">,</span> <span class="n">Popen</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageTk</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>
<span class="k">except</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Literal</span>

<span class="kn">from</span> <span class="nn">simba.mixins.config_reader</span> <span class="kn">import</span> <span class="n">ConfigReader</span>
<span class="kn">from</span> <span class="nn">simba.ui.tkinter_functions</span> <span class="kn">import</span> <span class="n">Entry_Box</span>
<span class="kn">from</span> <span class="nn">simba.utils.checks</span> <span class="kn">import</span> <span class="n">check_int</span>
<span class="kn">from</span> <span class="nn">simba.utils.enums</span> <span class="kn">import</span> <span class="n">Formats</span><span class="p">,</span> <span class="n">Labelling</span>
<span class="kn">from</span> <span class="nn">simba.utils.errors</span> <span class="kn">import</span> <span class="n">FrameRangeError</span><span class="p">,</span> <span class="n">InvalidInputError</span>
<span class="kn">from</span> <span class="nn">simba.utils.printing</span> <span class="kn">import</span> <span class="n">SimbaTimer</span><span class="p">,</span> <span class="n">stdout_success</span>
<span class="kn">from</span> <span class="nn">simba.utils.read_write</span> <span class="kn">import</span> <span class="p">(</span><span class="n">find_time_stamp_from_frame_numbers</span><span class="p">,</span>
                                    <span class="n">get_all_clf_names</span><span class="p">,</span> <span class="n">get_fn_ext</span><span class="p">,</span>
                                    <span class="n">get_video_meta_data</span><span class="p">,</span> <span class="n">read_df</span><span class="p">,</span> <span class="n">write_df</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">simba.utils.warnings</span> <span class="kn">import</span> <span class="n">FrameRangeWarning</span>
<span class="kn">from</span> <span class="nn">simba.video_processors.video_processing</span> <span class="kn">import</span> <span class="n">clip_video_in_range</span>


<div class="viewcode-block" id="AnnotatorMixin"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin">[docs]</a><span class="k">class</span> <span class="nc">AnnotatorMixin</span><span class="p">(</span><span class="n">ConfigReader</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Methods for creating tkinter GUI frames and functions associated with annotating videos.</span>

<span class="sd">    Currently under development (starting 01/24). As the number of different annotation methods and interfaces increases,</span>
<span class="sd">    this class will contain common methods for all annotation interfaces to decrease code duplication.</span>

<span class="sd">    :param Union[str, os.PathLike] config_path: Path to SimBA project config ini file.</span>
<span class="sd">    :param Union[str, os.PathLike] video_path: Path to video file to-be annotated.</span>
<span class="sd">    :param Union[str, os.PathLike] data_path: Path to featurized pose-estimation data associated with the video.</span>
<span class="sd">    :param Optional[Tuple[int]] frame_size: The size of the subframe displaying the video frame in the GUI.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">],</span>
        <span class="n">video_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">],</span>
        <span class="n">data_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">],</span>
        <span class="n">frame_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Labelling</span><span class="o">.</span><span class="n">MAX_FRM_SIZE</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="n">ConfigReader</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_path</span><span class="o">=</span><span class="n">config_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">video_path</span> <span class="o">=</span> <span class="n">video_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">video_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">video_meta_data</span> <span class="o">=</span> <span class="n">get_video_meta_data</span><span class="p">(</span><span class="n">video_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">video_meta_data</span><span class="p">[</span><span class="s2">&quot;frame_count&quot;</span><span class="p">]))</span>
        <span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">video_name</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_fn_ext</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="n">video_path</span><span class="p">)</span>
        <span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pixels_per_mm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_video_info</span><span class="p">(</span>
            <span class="n">video_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_name</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target_lst</span> <span class="o">=</span> <span class="n">get_all_clf_names</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">target_cnt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clf_cnt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">original_data</span> <span class="o">=</span> <span class="n">read_df</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">data_path</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">file_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">targets_folder</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">video_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_type</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_frm_no</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">original_data</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">original_data</span><span class="o">.</span><span class="n">index</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_frm</span> <span class="o">=</span> <span class="n">Toplevel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span> <span class="o">=</span> <span class="n">frame_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_frm</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>

<div class="viewcode-block" id="AnnotatorMixin.video_frm_label"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.video_frm_label">[docs]</a>    <span class="k">def</span> <span class="nf">video_frm_label</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">frm_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">max_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">loc</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Inserts a video frame as a tkinter label at a specified maximum size at specified grid location.</span>

<span class="sd">        .. image:: _static/img/video_frm_label.png</span>
<span class="sd">           :width: 500</span>
<span class="sd">           :align: center</span>

<span class="sd">        :param int frm_number: The frame number if the video that should be displayed as a tkinter label.</span>
<span class="sd">        :param Optional[Tuple[int, int]] max_size: The maximum size of the image when displayed. If None, then ``frame_size`` defined at instance init.</span>
<span class="sd">        :param Tuple[int, int] loc: The grid location (row, column) within the main frame at which the video frame should be displayed.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">max_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">max_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span>
        <span class="k">if</span> <span class="n">frm_number</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">video_meta_data</span><span class="p">[</span><span class="s2">&quot;frame_count&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Cannot display frame </span><span class="si">{</span><span class="n">frm_number</span><span class="si">}</span><span class="s1">. Video contains </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">video_meta_data</span><span class="p">[</span><span class="s2">&quot;frame_count&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1"> frames.&#39;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">frm_number</span><span class="p">)</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">frm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">frm</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">frm</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_RGB2BGR</span><span class="p">)</span>
        <span class="n">frm</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">frm</span><span class="p">)</span>
        <span class="n">frm</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">(</span><span class="n">max_size</span><span class="p">,</span> <span class="n">Image</span><span class="o">.</span><span class="n">ANTIALIAS</span><span class="p">)</span>
        <span class="n">frm</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">main_frm</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">frm</span><span class="p">)</span>
        <span class="n">video_frame</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_frm</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">frm</span><span class="p">)</span>
        <span class="n">video_frame</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">frm</span>
        <span class="n">video_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">column</span><span class="o">=</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span></div>

<div class="viewcode-block" id="AnnotatorMixin.h_nav_bar"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.h_nav_bar">[docs]</a>    <span class="k">def</span> <span class="nf">h_nav_bar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Frame</span><span class="p">,</span>
        <span class="n">update_funcs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">store_funcs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">700</span><span class="p">),</span>
        <span class="n">loc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">previous_next_clf</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a horizontal frame navigation bar where the buttons are tied to callbacks for changing and displaying video frames.</span>

<span class="sd">        .. image:: _static/img/h_nav_bar.png</span>
<span class="sd">           :width: 500</span>
<span class="sd">           :align: center</span>

<span class="sd">        :param Frame parent: The tkinter Frame to place navigation bar within.</span>
<span class="sd">        :param Optional[List[Callable[[int], None]]] update_funcs: Optional list of callables that accepts a single integer inputs.  Can be methods that updates part of the interface as the frame number changes.</span>
<span class="sd">        :param Optional[List[Callable[[], None]]] store_funcs: Optional list of callables without arguments. Can be methods that stores the selections in memory as users proceeds through the frames.</span>
<span class="sd">        :param Optional[Tuple[int, int]] size: The size of the navigation bar in h x w. Default 300 x 700.</span>
<span class="sd">        :param Optional[Tuple[int, int]] loc: The grid location (row, column) within the parent frame at which the navigation bar should be displayed. Defualt: (1, 0).</span>
<span class="sd">        :param Optional[bool] previous_next_clf: If True, then include four buttons allowing users to navigate to the most proximal preceding or proceeding frame where behaviors are annotated as present or absent.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">out_frm</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">nav_frm</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">out_frm</span><span class="p">)</span>
        <span class="n">jump_frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">out_frm</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">jump_lbl</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">jump_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;JUMP SIZE:&quot;</span><span class="p">)</span>
        <span class="n">jump_size</span> <span class="o">=</span> <span class="n">Scale</span><span class="p">(</span><span class="n">jump_frame</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="n">jump_size</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span> <span class="o">=</span> <span class="n">Entry_Box</span><span class="p">(</span><span class="n">nav_frm</span><span class="p">,</span> <span class="s2">&quot;FRAME NUMBER&quot;</span><span class="p">,</span> <span class="s2">&quot;15&quot;</span><span class="p">,</span> <span class="n">validation</span><span class="o">=</span><span class="s2">&quot;numeric&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_set</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">min_frm_no</span><span class="p">)</span>
        <span class="n">forward_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">nav_frm</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                <span class="n">new_frm_id</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">update_funcs</span><span class="o">=</span><span class="n">update_funcs</span><span class="p">,</span>
                <span class="n">store_funcs</span><span class="o">=</span><span class="n">store_funcs</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="n">backward_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">nav_frm</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&lt;&quot;</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                <span class="n">new_frm_id</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">update_funcs</span><span class="o">=</span><span class="n">update_funcs</span><span class="p">,</span>
                <span class="n">store_funcs</span><span class="o">=</span><span class="n">store_funcs</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="n">forward_max_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">nav_frm</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&gt;&gt;&quot;</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                <span class="n">new_frm_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">update_funcs</span><span class="o">=</span><span class="n">update_funcs</span><span class="p">,</span>
                <span class="n">store_funcs</span><span class="o">=</span><span class="n">store_funcs</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="n">backward_max_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">nav_frm</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&lt;&lt;&quot;</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                <span class="n">new_frm_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">min_frm_no</span><span class="p">,</span>
                <span class="n">update_funcs</span><span class="o">=</span><span class="n">update_funcs</span><span class="p">,</span>
                <span class="n">store_funcs</span><span class="o">=</span><span class="n">store_funcs</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="n">jump_back</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">jump_frame</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&lt;&lt;&quot;</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                <span class="n">new_frm_id</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">)</span> <span class="o">-</span> <span class="n">jump_size</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span>
                <span class="n">update_funcs</span><span class="o">=</span><span class="n">update_funcs</span><span class="p">,</span>
                <span class="n">store_funcs</span><span class="o">=</span><span class="n">store_funcs</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="n">jump_forward</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">jump_frame</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&gt;&gt;&quot;</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                <span class="n">new_frm_id</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">)</span> <span class="o">+</span> <span class="n">jump_size</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span>
                <span class="n">update_funcs</span><span class="o">=</span><span class="n">update_funcs</span><span class="p">,</span>
                <span class="n">store_funcs</span><span class="o">=</span><span class="n">store_funcs</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="n">select_frm_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">nav_frm</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;VIEW SELECTED FRAME&quot;</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                <span class="n">new_frm_id</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">),</span>
                <span class="n">update_funcs</span><span class="o">=</span><span class="n">update_funcs</span><span class="p">,</span>
                <span class="n">store_funcs</span><span class="o">=</span><span class="n">store_funcs</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="n">nav_frm</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">backward_max_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">31</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NE</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="n">Labelling</span><span class="o">.</span><span class="n">PADDING</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">backward_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NE</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="n">Labelling</span><span class="o">.</span><span class="n">PADDING</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">forward_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NE</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="n">Labelling</span><span class="o">.</span><span class="n">PADDING</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">forward_max_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NE</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="n">Labelling</span><span class="o">.</span><span class="n">PADDING</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">select_frm_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NE</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="n">Labelling</span><span class="o">.</span><span class="n">PADDING</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">jump_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">jump_lbl</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NE</span><span class="p">)</span>
        <span class="n">jump_size</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">SE</span><span class="p">)</span>
        <span class="n">jump_back</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">SE</span><span class="p">)</span>
        <span class="n">jump_forward</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">SE</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">previous_next_clf</span><span class="p">:</span>
            <span class="n">next_clf_btn_frm</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">out_frm</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">next_absent_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
                <span class="n">next_clf_btn_frm</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;NEXT ABSENT&quot;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_proximal_annotated_frm</span><span class="p">(</span>
                    <span class="n">forwards</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">present</span><span class="o">=</span><span class="kc">False</span>
                <span class="p">),</span>
            <span class="p">)</span>
            <span class="n">next_present_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
                <span class="n">next_clf_btn_frm</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;NEXT PRESENT&quot;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_proximal_annotated_frm</span><span class="p">(</span>
                    <span class="n">forwards</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">present</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">),</span>
            <span class="p">)</span>
            <span class="n">last_absent_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
                <span class="n">next_clf_btn_frm</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;PREVIOUS ABSENT&quot;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_proximal_annotated_frm</span><span class="p">(</span>
                    <span class="n">forwards</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">present</span><span class="o">=</span><span class="kc">False</span>
                <span class="p">),</span>
            <span class="p">)</span>
            <span class="n">last_present_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
                <span class="n">next_clf_btn_frm</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;PREVIOUS PRESENT&quot;</span><span class="p">,</span>
                <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_proximal_annotated_frm</span><span class="p">(</span>
                    <span class="n">forwards</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">present</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">),</span>
            <span class="p">)</span>
            <span class="n">next_clf_btn_frm</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">last_present_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NE</span><span class="p">)</span>
            <span class="n">last_absent_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NE</span><span class="p">)</span>
            <span class="n">next_absent_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NE</span><span class="p">)</span>
            <span class="n">next_present_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NE</span><span class="p">)</span>

        <span class="n">out_frm</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">column</span><span class="o">=</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span></div>

<div class="viewcode-block" id="AnnotatorMixin.v_navigation_pane_targeted"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.v_navigation_pane_targeted">[docs]</a>    <span class="k">def</span> <span class="nf">v_navigation_pane_targeted</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Frame</span><span class="p">,</span>
        <span class="n">save_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">update_funcs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">store_funcs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">loc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a vertical navigation pane for playing a video and displaying and activating keyboard shortcuts when annotating bouts.</span>

<span class="sd">        .. image:: _static/img/h_nav_bar.png</span>
<span class="sd">           :width: 500</span>
<span class="sd">           :align: center</span>

<span class="sd">        :param Frame parent: The tkinter Frame to place the vertical navigation bar within.</span>
<span class="sd">        :param Callable[[], None] save_func: The save-data-to-disk function that should be called when using the save data shortcut.</span>
<span class="sd">        :param Optional[List[Callable[[int], None]]] update_funcs: Optional list of callables that accepts a single integer inputs.  Can be methods that updates part of the interface as the frame number changes.</span>
<span class="sd">        :param Optional[List[Callable[[], None]]] store_funcs: Optional list of callables without arguments. Can be methods that stores the selections in memory as users proceeds through the frames.</span>
<span class="sd">        :param Optional[Tuple[int, int]] loc: The grid location (row, column) within the parent frame at which the navigation bar should be displayed. Default: (1, 0).</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">bind_shortcut_keys</span><span class="p">(</span><span class="n">parent</span><span class="p">):</span>
            <span class="n">parent</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Control-s&gt;&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">save_func</span><span class="p">())</span>
            <span class="n">parent</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
                <span class="s2">&quot;&lt;Right&gt;&quot;</span><span class="p">,</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                    <span class="n">new_frm_id</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">update_funcs</span><span class="o">=</span><span class="n">update_funcs</span><span class="p">,</span>
                    <span class="n">store_funcs</span><span class="o">=</span><span class="n">store_funcs</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>
            <span class="n">parent</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
                <span class="s2">&quot;&lt;Left&gt;&quot;</span><span class="p">,</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                    <span class="n">new_frm_id</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">update_funcs</span><span class="o">=</span><span class="n">update_funcs</span><span class="p">,</span>
                    <span class="n">store_funcs</span><span class="o">=</span><span class="n">store_funcs</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>
            <span class="n">parent</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
                <span class="s2">&quot;&lt;Control-l&gt;&quot;</span><span class="p">,</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                    <span class="n">new_frm_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">update_funcs</span><span class="o">=</span><span class="n">update_funcs</span><span class="p">,</span>
                    <span class="n">store_funcs</span><span class="o">=</span><span class="n">store_funcs</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>
            <span class="n">parent</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
                <span class="s2">&quot;&lt;Control-o&gt;&quot;</span><span class="p">,</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                    <span class="n">new_frm_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">min_frm_no</span><span class="p">,</span>
                    <span class="n">update_funcs</span><span class="o">=</span><span class="n">update_funcs</span><span class="p">,</span>
                    <span class="n">store_funcs</span><span class="o">=</span><span class="n">store_funcs</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>
            <span class="n">parent</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
                <span class="s2">&quot;&lt;Control-a&gt;&quot;</span><span class="p">,</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                    <span class="n">new_frm_id</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">keep_radio_btn_choices</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>

        <span class="n">video_player_frm</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">play_video_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">video_player_frm</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;OPEN VIDEO&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__play_video</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">play_video_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="n">N</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">Label</span><span class="p">(</span>
            <span class="n">video_player_frm</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">  Keyboard shortcuts for video navigation: </span><span class="se">\n</span><span class="s2"> p = Pause/Play&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2"> After pressing pause:&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> o = +2 frames </span><span class="se">\n</span><span class="s2"> e = +10 frames </span><span class="se">\n</span><span class="s2"> w = +1 second&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2"> t = -2 frames </span><span class="se">\n</span><span class="s2"> s = -10 frames </span><span class="se">\n</span><span class="s2"> x = -1 second&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2"> q = Close video window </span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
        <span class="n">update_img_from_video</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">video_player_frm</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Show current video frame&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>
        <span class="n">update_img_from_video</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="n">N</span><span class="p">)</span>

        <span class="n">key_presses_lbl</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span>
            <span class="n">video_player_frm</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2"> Keyboard shortcuts for frame navigation: </span><span class="se">\n</span><span class="s2"> Right Arrow = +1 frame&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Left Arrow = -1 frame&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Ctrl + a = +1 frame and keep choices&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Ctrl + s = Save annotations file&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Ctrl + l = Last frame&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Ctrl + o = First frame&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">key_presses_lbl</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
        <span class="n">bind_shortcut_keys</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">video_player_frm</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">column</span><span class="o">=</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span></div>

<div class="viewcode-block" id="AnnotatorMixin.targeted_bouts_pane"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.targeted_bouts_pane">[docs]</a>    <span class="k">def</span> <span class="nf">targeted_bouts_pane</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Frame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a pane for choosing bouts start and end and a radiobutton truth table for targeted bouts annotations. Used by simba.labelling.targeted_annotations_bouts.TargetedAnnotatorBouts&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">set_selection</span><span class="p">():</span>
            <span class="n">selection_txt</span><span class="o">.</span><span class="n">config</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;CURRENT SELECTION START: </span><span class="si">{</span><span class="n">start_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="si">}</span><span class="s2">, END: </span><span class="si">{</span><span class="n">end_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">save_button</span><span class="o">.</span><span class="n">config</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;SAVE ANNOTATION CLIP </span><span class="se">\n</span><span class="s2"> START FRAME: </span><span class="si">{</span><span class="n">start_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="si">}</span><span class="s2">, </span><span class="se">\n</span><span class="s2"> END FRAME: </span><span class="si">{</span><span class="n">end_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_end</span> <span class="o">=</span> <span class="n">start_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="p">,</span> <span class="n">end_frm_bx</span><span class="o">.</span><span class="n">entry_get</span>

        <span class="n">pane</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_end</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
        <span class="n">selection_txt</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;CURRENT SELECTION START: </span><span class="si">{</span><span class="mi">0</span><span class="si">}</span><span class="s2">, END: </span><span class="si">{</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">start_frm_bx</span> <span class="o">=</span> <span class="n">Entry_Box</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span> <span class="s2">&quot;SELECT START FRAME:&quot;</span><span class="p">,</span> <span class="s2">&quot;20&quot;</span><span class="p">,</span> <span class="n">validation</span><span class="o">=</span><span class="s2">&quot;numeric&quot;</span><span class="p">,</span> <span class="n">entry_box_width</span><span class="o">=</span><span class="mi">10</span>
        <span class="p">)</span>
        <span class="n">start_frm_bx</span><span class="o">.</span><span class="n">entry_set</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
        <span class="n">end_frm_bx</span> <span class="o">=</span> <span class="n">Entry_Box</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span> <span class="s2">&quot;SELECT END FRAME:&quot;</span><span class="p">,</span> <span class="s2">&quot;20&quot;</span><span class="p">,</span> <span class="n">validation</span><span class="o">=</span><span class="s2">&quot;numeric&quot;</span><span class="p">,</span> <span class="n">entry_box_width</span><span class="o">=</span><span class="mi">10</span>
        <span class="p">)</span>
        <span class="n">end_frm_bx</span><span class="o">.</span><span class="n">entry_set</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="n">confirm_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;SET SELECTION&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">set_selection</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">selection_txt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">N</span><span class="p">)</span>
        <span class="n">start_frm_bx</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
        <span class="n">end_frm_bx</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
        <span class="n">confirm_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>

        <span class="n">Label</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;PRESENT&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span>
        <span class="p">)</span>
        <span class="n">Label</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ABSENT&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">target_cnt</span><span class="p">,</span> <span class="n">target</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_lst</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="p">[</span><span class="n">target</span><span class="p">]</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">Label</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
                <span class="n">row</span><span class="o">=</span><span class="n">target_cnt</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span>
            <span class="p">)</span>
            <span class="n">present</span> <span class="o">=</span> <span class="n">Radiobutton</span><span class="p">(</span>
                <span class="n">pane</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="p">[</span><span class="n">target</span><span class="p">],</span>
                <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">absent</span> <span class="o">=</span> <span class="n">Radiobutton</span><span class="p">(</span>
                <span class="n">pane</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="p">[</span><span class="n">target</span><span class="p">],</span>
                <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">present</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">target_cnt</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span>
            <span class="n">absent</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">target_cnt</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span>

        <span class="n">save_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;SAVE ANNOTATION CLIP </span><span class="se">\n</span><span class="s2"> START FRAME: </span><span class="si">{</span><span class="n">start_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="si">}</span><span class="s2">, </span><span class="se">\n</span><span class="s2"> END FRAME: </span><span class="si">{</span><span class="n">end_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
            <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">),</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__targeted_clips_save</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="n">save_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">5</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_lst</span><span class="p">),</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">pane</span></div>

<div class="viewcode-block" id="AnnotatorMixin.update_current_selected_frm_lbl"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.update_current_selected_frm_lbl">[docs]</a>    <span class="k">def</span> <span class="nf">update_current_selected_frm_lbl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_frm</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Helper to update label showing current frame text shown when annotating bouts frame-wise.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_selection_txt</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ANNOTATING FRAME: </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">new_frm</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">integers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\b\d+\b&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bout_selection_txt</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">new_frm</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">integers</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">new_frm</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">integers</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">FrameRangeWarning</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;You are viewing a frame (</span><span class="si">{</span><span class="n">new_frm</span><span class="si">}</span><span class="s2">) that is OUTSIDE your selected bout (frame </span><span class="si">{</span><span class="n">integers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> to frame </span><span class="si">{</span><span class="n">integers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">). Any annotation for this frame will not be saved.&quot;</span>
            <span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__update_bout_selection_txt</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">new_start_frm</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">new_end_frm</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Helper to update label showing current bout text shown when annotating bouts.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bout_selection_txt</span><span class="o">.</span><span class="n">config</span><span class="p">(</span>
            <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;BOUT SELECTION START: </span><span class="si">{</span><span class="n">new_start_frm</span><span class="si">}</span><span class="s2">, END: </span><span class="si">{</span><span class="n">new_end_frm</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_button</span><span class="o">.</span><span class="n">config</span><span class="p">(</span>
            <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;SAVE ANNOTATION CLIP </span><span class="se">\n</span><span class="s2"> START FRAME: </span><span class="si">{</span><span class="n">new_start_frm</span><span class="si">}</span><span class="s2">, </span><span class="se">\n</span><span class="s2"> END FRAME: </span><span class="si">{</span><span class="n">new_end_frm</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

<div class="viewcode-block" id="AnnotatorMixin.targeted_frames_selection_pane"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.targeted_frames_selection_pane">[docs]</a>    <span class="k">def</span> <span class="nf">targeted_frames_selection_pane</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Frame</span><span class="p">,</span> <span class="n">loc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a vertical pane that includes tkinter frames for selecting bouts and annotating behaviours in those bouts frame-wise.</span>

<span class="sd">        .. image:: _static/img/targeted_frames_selection_pane.png</span>
<span class="sd">           :width: 500</span>
<span class="sd">           :align: center</span>

<span class="sd">        :param Frame parent: The tkinter Frame to place the vertical annotation frame within.</span>
<span class="sd">        :param Optional[Tuple[int, int]] loc: The grid location (row, column) within the parent frame at which the pane should be displayed. Default: (0, 1).</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">set_selection</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                    <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Start frame (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="si">}</span><span class="s2">) cannot be the same or larger than the end frame (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">end_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__update_bout_selection_txt</span><span class="p">(</span>
                <span class="n">new_start_frm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">start_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="p">,</span>
                <span class="n">new_end_frm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">end_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">change_frame</span><span class="p">(</span>
                <span class="n">new_frm_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">start_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="p">,</span>
                <span class="n">update_funcs</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">update_current_selected_frm_lbl</span><span class="p">],</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session_annotated_frames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pane</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_end</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bout_selection_txt</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;BOUT SELECTED START: </span><span class="si">{</span><span class="mi">0</span><span class="si">}</span><span class="s2">, END: </span><span class="si">{</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_selection_txt</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ANNOTATING FRAME: </span><span class="si">{</span><span class="mi">0</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_frm_bx</span> <span class="o">=</span> <span class="n">Entry_Box</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span> <span class="s2">&quot;BOUT START FRAME:&quot;</span><span class="p">,</span> <span class="s2">&quot;20&quot;</span><span class="p">,</span> <span class="n">validation</span><span class="o">=</span><span class="s2">&quot;numeric&quot;</span><span class="p">,</span> <span class="n">entry_box_width</span><span class="o">=</span><span class="mi">10</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_frm_bx</span><span class="o">.</span><span class="n">entry_set</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_frm_bx</span> <span class="o">=</span> <span class="n">Entry_Box</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span> <span class="s2">&quot;BOUT END FRAME:&quot;</span><span class="p">,</span> <span class="s2">&quot;20&quot;</span><span class="p">,</span> <span class="n">validation</span><span class="o">=</span><span class="s2">&quot;numeric&quot;</span><span class="p">,</span> <span class="n">entry_box_width</span><span class="o">=</span><span class="mi">10</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_frm_bx</span><span class="o">.</span><span class="n">entry_set</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="n">confirm_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;SET SELECTION&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">set_selection</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bout_selection_txt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">N</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_selection_txt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">N</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_frm_bx</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_frm_bx</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
        <span class="n">confirm_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>

        <span class="n">Label</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;PRESENT&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span>
        <span class="p">)</span>
        <span class="n">Label</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ABSENT&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">target_cnt</span><span class="p">,</span> <span class="n">target</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_lst</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="p">[</span><span class="n">target</span><span class="p">]</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">Label</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">Formats</span><span class="o">.</span><span class="n">LABELFRAME_HEADER_FORMAT</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
                <span class="n">row</span><span class="o">=</span><span class="n">target_cnt</span> <span class="o">+</span> <span class="mi">6</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span>
            <span class="p">)</span>
            <span class="n">present</span> <span class="o">=</span> <span class="n">Radiobutton</span><span class="p">(</span>
                <span class="n">pane</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="p">[</span><span class="n">target</span><span class="p">],</span>
                <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">absent</span> <span class="o">=</span> <span class="n">Radiobutton</span><span class="p">(</span>
                <span class="n">pane</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="p">[</span><span class="n">target</span><span class="p">],</span>
                <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">present</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">target_cnt</span> <span class="o">+</span> <span class="mi">6</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span>
            <span class="n">absent</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">target_cnt</span> <span class="o">+</span> <span class="mi">6</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;SAVE ANNOTATION CLIP </span><span class="se">\n</span><span class="s2"> START FRAME: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="si">}</span><span class="s2">, </span><span class="se">\n</span><span class="s2"> END FRAME: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">end_frm_bx</span><span class="o">.</span><span class="n">entry_get</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
            <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">),</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">targeted_annotations_frames_save</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">6</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_lst</span><span class="p">),</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
        <span class="n">pane</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">column</span><span class="o">=</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">advanced_labelling_pane</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Frame</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">loc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">pane</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">Label</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;SELECT BEHAVIOR:&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">Formats</span><span class="o">.</span><span class="n">LABELFRAME_HEADER_FORMAT</span><span class="o">.</span><span class="n">value</span>
        <span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">N</span><span class="p">)</span>
        <span class="n">Label</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;PRESENT&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">Formats</span><span class="o">.</span><span class="n">LABELFRAME_HEADER_FORMAT</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span>
        <span class="p">)</span>
        <span class="n">Label</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ABSENT&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">Formats</span><span class="o">.</span><span class="n">LABELFRAME_HEADER_FORMAT</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span>
        <span class="p">)</span>
        <span class="n">Label</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;NONE&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">Formats</span><span class="o">.</span><span class="n">LABELFRAME_HEADER_FORMAT</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">target_cnt</span><span class="p">,</span> <span class="n">target</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_lst</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="p">[</span><span class="n">target</span><span class="p">]</span> <span class="o">=</span> <span class="n">IntVar</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_annotation_of_frame</span><span class="p">(</span>
                    <span class="n">frm_num</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">),</span>
                    <span class="n">clf</span><span class="o">=</span><span class="n">target</span><span class="p">,</span>
                    <span class="n">allowed_vals</span><span class="o">=</span><span class="n">Labelling</span><span class="o">.</span><span class="n">VALID_ANNOTATIONS_ADVANCED</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">Label</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">Formats</span><span class="o">.</span><span class="n">LABELFRAME_HEADER_FORMAT</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
                <span class="n">row</span><span class="o">=</span><span class="n">target_cnt</span> <span class="o">+</span> <span class="mi">6</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span>
            <span class="p">)</span>
            <span class="n">present</span> <span class="o">=</span> <span class="n">Radiobutton</span><span class="p">(</span>
                <span class="n">pane</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="p">[</span><span class="n">target</span><span class="p">],</span>
                <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_annotation</span><span class="p">(),</span>
            <span class="p">)</span>
            <span class="n">absent</span> <span class="o">=</span> <span class="n">Radiobutton</span><span class="p">(</span>
                <span class="n">pane</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="p">[</span><span class="n">target</span><span class="p">],</span>
                <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_annotation</span><span class="p">(),</span>
            <span class="p">)</span>
            <span class="n">none</span> <span class="o">=</span> <span class="n">Radiobutton</span><span class="p">(</span>
                <span class="n">pane</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="p">[</span><span class="n">target</span><span class="p">],</span>
                <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_annotation</span><span class="p">(),</span>
            <span class="p">)</span>
            <span class="n">present</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">target_cnt</span> <span class="o">+</span> <span class="mi">6</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span>
            <span class="n">absent</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">target_cnt</span> <span class="o">+</span> <span class="mi">6</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span>
            <span class="n">none</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">target_cnt</span> <span class="o">+</span> <span class="mi">6</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
            <span class="n">pane</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;SAVE DATA&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
            <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">),</span>
            <span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_data</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">6</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_lst</span><span class="p">),</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">S</span>
        <span class="p">)</span>
        <span class="n">pane</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">column</span><span class="o">=</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sticky</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span>

<div class="viewcode-block" id="AnnotatorMixin.get_annotation_of_frame"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.get_annotation_of_frame">[docs]</a>    <span class="k">def</span> <span class="nf">get_annotation_of_frame</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">frm_num</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">clf</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">allowed_vals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Helper to retrieve the stored annotation of a specific classifier at a specific frame index&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">frm_num</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">clf</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;You are annotating frame </span><span class="si">{</span><span class="n">frm_num</span><span class="si">}</span><span class="s2"> with is not a frame in the dataset (row count: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">allowed_vals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">clf</span><span class="p">][</span><span class="n">frm_num</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_vals</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">InvalidInputError</span><span class="p">(</span>
                    <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Found labelling value </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">clf</span><span class="p">][</span><span class="n">frm_num</span><span class="p">]</span><span class="si">}</span><span class="s2">. Allowed: </span><span class="si">{</span><span class="n">allowed_vals</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">clf</span><span class="p">][</span><span class="n">frm_num</span><span class="p">]</span></div>

<div class="viewcode-block" id="AnnotatorMixin.update_clf_radiobtns"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.update_clf_radiobtns">[docs]</a>    <span class="k">def</span> <span class="nf">update_clf_radiobtns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frm_num</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update helper to set the radio button to annotated values&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">clf</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clf_names</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_annotation_of_frame</span><span class="p">(</span><span class="n">frm_num</span><span class="o">=</span><span class="n">frm_num</span><span class="p">,</span> <span class="n">clf</span><span class="o">=</span><span class="n">clf</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="p">[</span><span class="n">clf</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__play_video</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Helper to play video when the ``play video`` button is pressed&quot;&quot;&quot;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Popen</span><span class="p">(</span>
            <span class="s2">&quot;python </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Labelling</span><span class="o">.</span><span class="n">PLAY_VIDEO_SCRIPT_PATH</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
            <span class="n">stdin</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span>
            <span class="n">stdout</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span>
            <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">video_path</span><span class="p">,</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="n">p</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">temp_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="p">),</span> <span class="s2">&quot;subprocess.txt&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">text_file</span><span class="p">:</span>
            <span class="n">text_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pid</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__targeted_clips_save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Helper method called by targeted_clips_pane to save video and dataframe sliced during targeted clips annotations&quot;&quot;&quot;</span>
        <span class="n">timer</span> <span class="o">=</span> <span class="n">SimbaTimer</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Saving video clip...&quot;</span><span class="p">)</span>
        <span class="n">start_idx</span><span class="p">,</span> <span class="n">end_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_start</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_end</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start_idx</span> <span class="o">&gt;=</span> <span class="n">end_idx</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Start frame (</span><span class="si">{</span><span class="n">start_idx</span><span class="si">}</span><span class="s2">) has to be before end frame (</span><span class="si">{</span><span class="n">end_idx</span><span class="si">}</span><span class="s2">).&quot;</span><span class="p">,</span>
                <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">start_idx</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">start_idx</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_frm_no</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">end_idx</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">end_idx</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_frm_no</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Start frame (</span><span class="si">{</span><span class="n">start_idx</span><span class="si">}</span><span class="s2">) or end frame (</span><span class="si">{</span><span class="n">end_idx</span><span class="si">}</span><span class="s2">) cannot be smaller or larger than the minimum (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">min_frm_no</span><span class="si">}</span><span class="s2">) and maximum (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span><span class="si">}</span><span class="s2">) frame of the video&quot;</span><span class="p">,</span>
                <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">timestamps</span> <span class="o">=</span> <span class="n">find_time_stamp_from_frame_numbers</span><span class="p">(</span>
            <span class="n">start_frame</span><span class="o">=</span><span class="n">start_idx</span><span class="p">,</span> <span class="n">end_frame</span><span class="o">=</span><span class="n">end_idx</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_meta_data</span><span class="p">[</span><span class="s2">&quot;fps&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">clip_video_in_range</span><span class="p">(</span>
            <span class="n">file_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_path</span><span class="p">,</span>
            <span class="n">start_time</span><span class="o">=</span><span class="n">timestamps</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">end_time</span><span class="o">=</span><span class="n">timestamps</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">out_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_dir</span><span class="p">,</span>
            <span class="n">include_clip_time_in_filename</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">df_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">video_name</span>
            <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;_</span><span class="si">{</span><span class="n">timestamps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">timestamps</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_type</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="p">)</span>
        <span class="n">video_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">video_name</span>
            <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;_</span><span class="si">{</span><span class="n">timestamps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">timestamps</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Saving targets data </span><span class="si">{</span><span class="n">df_filename</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">start_idx</span><span class="p">:</span><span class="n">end_idx</span><span class="p">,</span> <span class="p">:]</span>
        <span class="k">for</span> <span class="n">clf</span><span class="p">,</span> <span class="n">btn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">df</span><span class="p">[</span><span class="n">clf</span><span class="p">]</span> <span class="o">=</span> <span class="n">btn</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">write_df</span><span class="p">(</span>
            <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
            <span class="n">file_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">file_type</span><span class="p">,</span>
            <span class="n">save_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">targets_folder</span><span class="p">,</span> <span class="n">df_filename</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_video_to_video_info</span><span class="p">(</span>
            <span class="n">video_name</span><span class="o">=</span><span class="n">video_name</span><span class="p">,</span>
            <span class="n">fps</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_meta_data</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span>
            <span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_meta_data</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">],</span>
            <span class="n">pixels_per_mm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pixels_per_mm</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">timer</span><span class="o">.</span><span class="n">stop_timer</span><span class="p">()</span>
        <span class="n">stdout_success</span><span class="p">(</span>
            <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Annotated clip </span><span class="si">{</span><span class="n">df_filename</span><span class="si">}</span><span class="s2"> saved into SimBA project&quot;</span><span class="p">,</span>
            <span class="n">elapsed_time</span><span class="o">=</span><span class="n">timer</span><span class="o">.</span><span class="n">elapsed_time_str</span><span class="p">,</span>
        <span class="p">)</span>

<div class="viewcode-block" id="AnnotatorMixin.change_frame"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.change_frame">[docs]</a>    <span class="k">def</span> <span class="nf">change_frame</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">new_frm_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">min_frm</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_frm</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">update_funcs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">store_funcs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">keep_radio_btn_choices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change the frame displayed in annotator GUI.</span>

<span class="sd">        .. note::</span>
<span class="sd">           store_funcs will be executed before update_funcs.</span>

<span class="sd">        :parameter int new_frm_id: The frame number of the new frame.</span>
<span class="sd">        :parameter Optional[int] min_frm: If the minimum frame number is not the first frame of the video, pass the minimum frame number here.</span>
<span class="sd">        :parameter Optional[int] max_frm: If the maximum frame number is not the last frame of the video, pass the max frame number here.</span>
<span class="sd">        :parameter Optional[int] max_frm: If the maximum frame number is not the last frame of the video, pass the max frame number here.</span>
<span class="sd">        :parameter Optional[List[Callable[[int], None]]] update_funcs: Optional functions that takes accepts the new frame numers that should be called. E.g., if updating the frame number should cause the display of the new frame numbers in any other Frame.</span>
<span class="sd">        :parameter Optional[List[Callable[[], None]]] store_funcs: Optional functions that saves user frame selections in memory.</span>
<span class="sd">        :parameter Optional[bool] keep_radio_btn_choices: If True, then any update_funcs that causes the update of radio button choices in the newly displayed frame will be supressed. Thus, the choices in the prior frame is maintained.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">check_int</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;FRAME NUMBER&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">new_frm_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">min_frm</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">check_int</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;MIN FRAME NUMBER&quot;</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="n">min_frm</span><span class="p">,</span>
                <span class="n">min_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">min_frm_no</span><span class="p">,</span>
                <span class="n">max_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">max_frm</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">check_int</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;MIN FRAME NUMBER&quot;</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="n">max_frm</span><span class="p">,</span>
                <span class="n">min_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">min_frm_no</span><span class="p">,</span>
                <span class="n">max_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">new_frm_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_set</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;FRAME </span><span class="si">{</span><span class="n">new_frm_id</span><span class="si">}</span><span class="s2"> CANNOT BE SHOWN - YOU ARE VIEWING THE FINAL FRAME OF THE VIDEO (FRAME NUMBER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">new_frm_id</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_set</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">min_frm_no</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;FRAME </span><span class="si">{</span><span class="n">new_frm_id</span><span class="si">}</span><span class="s2"> CANNOT BE SHOWN - YOU ARE VIEWING THE FIRST FRAME OF THE VIDEO (FRAME NUMBER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">min_frm_no</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">old_frm_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_set</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="n">new_frm_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">video_frm_label</span><span class="p">(</span><span class="n">frm_number</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">new_frm_id</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">keep_radio_btn_choices</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">update_funcs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">update_funcs</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">update_funcs</span> <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_clf_radiobtns</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">update_funcs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">update_funcs</span><span class="p">:</span>
                <span class="n">f</span><span class="p">(</span><span class="n">new_frm_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">store_funcs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">store_funcs</span><span class="p">:</span>
                <span class="n">f</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnnotatorMixin.store_targeted_annotations_frames"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.store_targeted_annotations_frames">[docs]</a>    <span class="k">def</span> <span class="nf">store_targeted_annotations_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to store annotations in memory while annotating targeted bouts frame-wise&quot;&quot;&quot;</span>
        <span class="n">integers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\b\d+\b&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bout_selection_txt</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">old_frm_val</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">integers</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span>
            <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">old_frm_val</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">integers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="n">FrameRangeWarning</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ANNOTATION NOT SAVED: Frame </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">old_frm_val</span><span class="si">}</span><span class="s2"> is outside the selected bout (</span><span class="si">{</span><span class="n">integers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">integers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">old_frm_val</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">clf</span><span class="p">,</span> <span class="n">btn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">old_frm_val</span><span class="p">)][</span><span class="n">clf</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">btn</span><span class="o">.</span><span class="n">get</span><span class="p">())</span></div>

<div class="viewcode-block" id="AnnotatorMixin.store_annotation"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.store_annotation">[docs]</a>    <span class="k">def</span> <span class="nf">store_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to store annotations in memory&quot;&quot;&quot;</span>
        <span class="n">frm_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span>
        <span class="k">for</span> <span class="n">clf</span><span class="p">,</span> <span class="n">btn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clf_radio_btns</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">frm_num</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">clf</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                    <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;You are annotating frame </span><span class="si">{</span><span class="n">frm_num</span><span class="si">}</span><span class="s2"> with is not a frame in the dataset (row count: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_frm_no</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">clf</span><span class="p">][</span><span class="nb">int</span><span class="p">(</span><span class="n">frm_num</span><span class="p">)]</span> <span class="o">=</span> <span class="n">btn</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnnotatorMixin.targeted_annotations_frames_save"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.targeted_annotations_frames_save">[docs]</a>    <span class="k">def</span> <span class="nf">targeted_annotations_frames_save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to save annotations to disk when using targeted bout frame-wise annotations&quot;&quot;&quot;</span>
        <span class="n">save_timer</span> <span class="o">=</span> <span class="n">SimbaTimer</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">annotated_frms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">integers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\b\d+\b&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bout_selection_txt</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">frm</span><span class="p">,</span> <span class="n">annotation_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">annotated_frms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">frm</span><span class="p">))</span>
        <span class="n">missing_frms</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">integers</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">integers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">annotated_frms</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">additional_frms</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">set</span><span class="p">(</span><span class="n">annotated_frms</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">integers</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">integers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">missing_frms</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;MISSING ANNOTATIONS FOR FRAMES IN SELECTED BOUT: </span><span class="si">{</span><span class="n">missing_frms</span><span class="si">}</span><span class="s2">. ANNOTATE THESE FRAMES BEFORE SAVING SELECTED BOUT DATA.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">additional_frms</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">FrameRangeWarning</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Annotations found for frames that are not within the selected bout </span><span class="si">{</span><span class="n">additional_frms</span><span class="si">}</span><span class="s2">. These annotations will not be saved.&quot;</span>
            <span class="p">)</span>
        <span class="n">annotated_frms</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">annotated_frms</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">additional_frms</span><span class="p">]</span>
        <span class="n">duplication_annotations</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">annotated_frms</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">session_annotated_frames</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">duplication_annotations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Frames </span><span class="si">{</span><span class="n">duplication_annotations</span><span class="si">}</span><span class="s2"> of video </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">video_name</span><span class="si">}</span><span class="s2"> have already been annotated as part of a different bout. You can not annotate these frame again in the same annotation session.&quot;</span>
            <span class="p">)</span>
        <span class="n">annotated_rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">annotated_frms</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">frm</span><span class="p">,</span> <span class="n">annotation_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">clf</span><span class="p">,</span> <span class="n">btn_val</span> <span class="ow">in</span> <span class="n">annotation_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">annotated_rows</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">frm</span><span class="p">,</span> <span class="n">clf</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">btn_val</span><span class="p">)</span>
        <span class="n">save_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">targets_folder</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">video_name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">integers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">integers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">write_df</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">annotated_rows</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">file_type</span><span class="p">,</span> <span class="n">save_path</span><span class="o">=</span><span class="n">save_path</span><span class="p">)</span>
        <span class="n">timestamps</span> <span class="o">=</span> <span class="n">find_time_stamp_from_frame_numbers</span><span class="p">(</span>
            <span class="n">start_frame</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">annotated_frms</span><span class="p">),</span>
            <span class="n">end_frame</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">annotated_frms</span><span class="p">),</span>
            <span class="n">fps</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_meta_data</span><span class="p">[</span><span class="s2">&quot;fps&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="n">clip_video_in_range</span><span class="p">(</span>
            <span class="n">file_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_path</span><span class="p">,</span>
            <span class="n">start_time</span><span class="o">=</span><span class="n">timestamps</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">end_time</span><span class="o">=</span><span class="n">timestamps</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">out_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_dir</span><span class="p">,</span>
            <span class="n">include_frame_numbers_in_filename</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_video_to_video_info</span><span class="p">(</span>
            <span class="n">video_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">video_name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">integers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">integers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">fps</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_meta_data</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span>
            <span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_meta_data</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">],</span>
            <span class="n">pixels_per_mm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pixels_per_mm</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">save_timer</span><span class="o">.</span><span class="n">stop_timer</span><span class="p">()</span>
        <span class="n">stdout_success</span><span class="p">(</span>
            <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Annotated clip </span><span class="si">{</span><span class="n">save_path</span><span class="si">}</span><span class="s2"> saved into SimBA project&quot;</span><span class="p">,</span>
            <span class="n">elapsed_time</span><span class="o">=</span><span class="n">save_timer</span><span class="o">.</span><span class="n">elapsed_time_str</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session_annotated_frames</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">annotated_frms</span><span class="p">)</span></div>

<div class="viewcode-block" id="AnnotatorMixin.find_proximal_annotated_frm"><a class="viewcode-back" href="../../../simba.mixins.html#simba.mixins.annotator_mixin.AnnotatorMixin.find_proximal_annotated_frm">[docs]</a>    <span class="k">def</span> <span class="nf">find_proximal_annotated_frm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">forwards</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">present</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Helper to find the most proximal preceding or proceeding frame where any one behavior are annotated as present or absent.&quot;&quot;&quot;</span>
        <span class="n">target_frames</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">present</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">clf</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clf_names</span><span class="p">:</span>
                <span class="n">target_frames</span> <span class="o">=</span> <span class="n">target_frames</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
                    <span class="nb">set</span><span class="p">([</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">clf</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">1</span><span class="p">])</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">clf</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clf_names</span><span class="p">:</span>
                <span class="n">target_frames</span> <span class="o">=</span> <span class="n">target_frames</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
                    <span class="nb">set</span><span class="p">([</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">clf</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">0</span><span class="p">])</span>
                <span class="p">)</span>
        <span class="k">if</span> <span class="n">forwards</span><span class="p">:</span>
            <span class="n">target_frames</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">target_frames</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">target_frames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">present</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                        <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;No LATER frames with behavior annotated as PRESENT found&quot;</span><span class="p">,</span>
                        <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                        <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;No LATER frames with behavior annotated as ABSENT found&quot;</span><span class="p">,</span>
                        <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                    <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">target_frames</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">target_frames</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">target_frames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">present</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                        <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;No PRIOR frames with behavior annotated as PRESENT found&quot;</span><span class="p">,</span>
                        <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameRangeError</span><span class="p">(</span>
                        <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;No PRIOR frames with behavior annotated as ABSENT found&quot;</span><span class="p">,</span>
                        <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                    <span class="p">)</span>

        <span class="n">frm_num</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">target_frames</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_get</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frm_box</span><span class="o">.</span><span class="n">entry_set</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="n">frm_num</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_clf_radiobtns</span><span class="p">(</span><span class="n">frm_num</span><span class="o">=</span><span class="n">frm_num</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">video_frm_label</span><span class="p">(</span><span class="n">frm_number</span><span class="o">=</span><span class="n">frm_num</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">save_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">original_data</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">target_col</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">original_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
                <span class="p">[</span><span class="n">target_col</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">original_data</span><span class="p">[</span><span class="n">target_col</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">target_col</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">original_data</span><span class="p">)</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, sronilsson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>